## 데이터 모델링의 이해
### 모델링
- 복잡한 현실게꼐를 추상화 · 단순화하여 일정한 표기법(형식)에 의해 명확히 표현하는 것
- 데이터베이스를 구축하기 위한 분석 · 설계의 과정
- 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법

### ⭐ 모델링 특징
- 추상화 : 현실세계를 일정한 형식에 맞춰 간략히 표현
- 단순화 : 약속된 규약으로 제한된 표기법이나 언어로 표현
- 명확화 : 애매모호함을 제거하고 정확하게 현상을 기술

### 모델링의 관점
- 데이터 관점 (What) '무엇이 필요한지에만 관심'
    - 업무와 데이터의 관계, 데이터와 데이터의 관계를 모델링
    - 프로세스에서 사용하는 데이터를 모델링
- 프로세스 관점 (How) '어떤 절차/순서로 이루어지는지에 관심'
    - 업무가 실제 하고 있는일, 해야 하는 일을 모델링
- 데이터와 프로세스의 상관관점 (Interaction)
    - 업무 처리 방법에 따라 데이터가 받는 영향을 모델링

### 데이터 모델링의 중요성
① 파급효과 (Leverage)
- 큰 시스템에서 데이터 구조의 변경으로 인한 일련의 변경작업은 큰 위험요소

② 간결한 표현 (Conciseness)
- 간결하게 그려저 있는 데이터 모델을 리뷰하면서 파악하는 것이 훨씬 빠르다.
- 데이터 모델 = 건축물의 설계 도면

③ 데이터 품질 (Data Quality)
- 데이터 품질 기간이 오래될 수록 활용가치는 훨씬 높아진다.

### ⭐ 데이터 모델링의 유의점
① 중복 (Duplication)
- 여러 장소의 DB에 같은 정보를 저장하지 않도록 설계해야 한다.

② 비유연성 (Inflexibility)
- 데이터의 정의를 데이터의 사용 프로세스와 분리해야 한다.
- 사소한 업무변화에 데이터 모델이 수시로 변경되면 안된다.

③ 비일관성 (Inconsistency)
- 데이터 간 상호 연관 관계가 명확히 정의되어야 한다.

### ⭐ 데이터 모델링의 3단계
1\) 개념적 모델링
- 업무중심적
- 포괄적인 수준의 모델링
- **추상화 수준이 가장 높음**
- 업무 분석 후 업무의 핵심 Entity를 추출
- ERD 도출
- 전사적으로 수행

2\) 논리적 모델링
- 테이블 도출
- (Key, 속성, 관계)를 표현
- 정규화 적용 -> 데이터의 일관성 유지

3\) 물리적 모델링
- DBMS의 특성과 맞게 데이터 인덱스, 저장방식 등 물리적인 성격 고려

### 데이터의 독립성
- 데이터의 구조에 변화가 생겨도 응용 프로그램이 변경될 필요 X
- 특정 스키마를 변경해도 상위 수준의 스키마 정의에 영향 X
=> 논리적 독립성과 물리적 독립성의 보장으로 실현됨

> 💡 데이터의 독립성이 유지되지 않는다면?
> - 데이터의 중복성 및 복잡도 증가
> - 요구사항 대응 난이도 증가 -> 데이터 유지보수 비용 증가

### 데이터베이스 스키마 (Schema)
- 데이터 모델링의 대상
- 데이터베이스 구조, 데이터 타입, 제약조건에 대한 명세
- 데이터베이스 설계 단계에서 명시되며 자주 변경되지 않음

### ⭐ 데이터베이트 3단계 구조
1\) 외부 스키마
- 사용자 개개인의 관점, View(여러 사용자 관점), DB이용자의 관점으로 구성된 개인적 DB 스키마

2\) 개념 스키마
- 모든 사용자 관점을 통합
- 조직 전체 관점의 통합
- DB에 저장되는 데이터와 그들 간의 관계
- 설계자 관점

3\) 내부 스키마
- DB가 물리적으로 저장된 형식
- 개발자 관점
- 데이터가 어떻게 저장되는가
- 저장 장치 관점

> 💡 데이터 모델링은 통합 관점의 개념 스키마를 만들어 가는 과정

### 사상 (Mapping)
- 상호 독립적인 개념을 연결시켜주는 다리
1\) 논리적 독립성
- 외부 스키마와 개념 스키마의 매핑을 통해 보장
- 개념 스키마가 변경되어도 외부 스키마에 영향 X
- 논리적 구조가 변경되어도 응용 프로그램에 영향 X

2\) 물리적 독립성
- 개념 스키마와 내부 스키마의 매핑을 통해 보장
- 내부 스키마가 변경되어도 외부/개념 스키마에 영향 X
- 저장장치의 구조변경은 응용 프로그램과 개념 스키마에 영향 X
- 물리 스키마가 변경되어도 논리 스키마에 영향 X

### 데이터 모델링의 3가지 구성 요소
- Entity
    - 업무와 관련된 어떤 것(Things)
    - ex) 학생, 과목
- Attribute
    - 어떤 것이 갖는 성격
    - eX) 이름, 학점, 과목명
- Relationship
    - 어떤 것 간의 관계
    - ex) 수강하다

#### 데이터베이스 인스턴스(Instance)
<table>
    <thead>
        <tr>
            <td>개념</td>
            <td>복수/집합개념</br>타입/클래스</td>
            <td>개별/단수개념</br>이커런스/인스턴스</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan="2">어떤것</td>
            <td>엔터티 타입</td>
            <td>엔터티</td>
        </tr>
        <tr>
            <td>엔터티</td>
            <td>인스턴스/어커런스</td>
        </tr>
        <tr>
            <td>연관</td>
            <td>관계</td>
            <td>페어링</td>
        </tr>
        <tr>
            <td>성격</td>
            <td>속성</td>
            <td>속성값</td>
        </tr>
    </tbody>
</table>

### 좋은 데이터 모델의 요소
① 완전성 (Completeness)
- 업무에서 필요로 하는 모든 데이터가 모델에 정의되어야 한다.

② 중복배제 (None-Redundacy)
- 하나의 DB 내에 동일한 사실은 1번만 기록되어야 한다.
- ex) 고객 테이블과 주문 테이블에 '주소'라는 동일한 속성이 들어감
- ex) 나이와 생년월일 컬럼이 동시에 존재하는 것
- FK는 필수불가결한 경우

③ 업무규칙 (Business Rules)
- 업무 규칙이 데이터 모델에 표현되어야 하고, 모든 사용자가 공유할 수 있도록 제공되어야 한다.

④ 데이터 재사용 (Data Reusability)
- 데이터의 통합성과 독립성에 대해 고려해야 한다.
- 회사 전체 관점에서 공통 데이터를 도출하고, 이를 전 영역에서 사용할 수 있도록 설계해야 한다.
- ex) 파일시스템처럼 부서별로, 응용 프로그램별로 데이터를 따로 만들지 말라는 것

⑤ 의사소통 (Communication)
- 업무 규칙은 엔터티, 서브타입, 속성, 관계 등의 형태로 최대한 자세히 표현해야 한다.
- 이를 관련자들이 동일한 의미로 받아들여 활용할 수 있어야 한다.

⑥ 통합성 (Integration)
- 동일한 데이터는 조직의 전체에서 1번만 정의되고, 이를 다른 영역에서 참조, 활용해야 한다.

### 데이터 모델링의 이해관계자
- DBA, 프로젝트 개발자, 현업 전문가, 전문 모델러
- 모두가 데이터 모델링을 알아야 한다.
- 프로젝트 개발자와 전문 모델러는 작성할 수 있어야 한다.
- 데이터 모델은 대상으로 하는 업무를 데이터 관점에서 분석하고 이를 설계하여 나오는 최종 산출물이다.

### ERD (Entity Relationship Diagram)
- 업무분석에서 도출된 엔터티와 엔터티 간의 관계를 이해하기 쉽게 도식화한 다이어그램
- 데이터 흐름과 프로세스와의 연관성을 이야기하는 표기법이자 산출문.
- 1976년 피터 첸이 Entity-Relationship Model(E-R model) 표기법을 만들었다.

### ERD 작성 순서
① 엔터티를 그린다.

② 엔터티를 적절하게 배치한다.
- 선이 꼬이지 않게, 가장 중요한 엔터디는 왼쪽 상단에 배치

③ 엔터티 간 관계를 설정한다.
- 식별자 관계를 우선 설정한다.
(식별자 관계 : 부모로부터 상속받은 FK가 자식의 PK의 일부가 되는 관계)
- 가급적 Cycle 관계(순환 관계)가 발생하지 않도록 한다.

④ 관계명을 기술한다.
- 현재형 사용, 지나치게 포괄적인 단어는 지양
- ex) 주문하다, 철회한다, 수강한다.

⑤ 관계의 참여보를 기술한다. + 관계차수(Cardinality)를 기술한다.
- 관계차수 : 1...N(Chen), 까마귀발 표시(IE)

⑥ 관계의 필수/선택 여부를 기술한다.
- 필수여부는 원을 이용하여 표시(IE)

## 엔터티
### 엔터티란?
- 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합
- 엔터티 = 인스턴스의 집합

### ⭐ 엔터티 유형
#### 💡 유형, 무형에 따른 분류
① 유형(Tangible) 엔터티
- 물리적인 형태가 있고 안정적이며 지속적 활용
- 업무로부터 엔터티를 구분하기 가장 용이
- ex) 교수, 강의실, 물품, 사원

② 개념(Conceptual) 엔터티
- 물리적 형태는 존재하지 않으나 관리해야 할 개념적 정보
- ex) 수업, 보험상품, 시스템, 조직

③ 사건(Event) 엔터티
- 업무를 수행함에 따라 발생되는 엔터티
- 비교적 발생량이 많으며 각종 통계자료로 이용될 수 있음
- ex) 수강신청, 주문, 입금, 미납
- 주로 relationship으로 할지, entity로 할지 고민하는 것들이 해당
- 혼자 존재할 수 없는 엔터티. 즉, 다른 엔터티에 의존해 있음 (수강신청은 학생과 수업이 있어야 함)

#### 💡 발생시점에 따른 분류
① 기본(Key) 엔터티
- 업무에 본래 존재하는 정보
- 다른 엔터티와 관계에 의해 생성되지 않고 독립적으로 생성되는 엔터티
- 타 엔터티의 부모 역할
- 자신의 고유 주식별자 가짐
- ex) 사원, 부서, 고객, 상품, 자재

② 중심(Main) 엔터티
- 기본 엔터티로부터 발생
- 기본 엔터티와 행위 엔터티 중간에 존재
- 다른 엔터티와의 관계를 통해 많은 행위 엔터티 생성
- ex) 계약, 주물, 청구, 사고, 매출

③ 행위(Active) 엔터티
- 2개 이상의 부모 엔터티로부터 발생
- 자주 변경되고 지속적으로 정보가 추가되어 데이터 양이 증가한다.
- 분석 초기단계에서는 잘 나타나지 않으며, 상세 설계 단계나 프로세스와 상관 모델링을 진행하면서 도출
- ex) 주문 목록, 사원 변경 이력

### 엔터티의 특징
- 반드시 해당 업무에서 필요학 관리하고자 하는 정보다.
- 유일한 실별자에 의해 식별이 가능하다.
    - ex) 학생의 학번, 강사의 사번, 사건의 사건번호
- 영속적으로 존재하는 인스턴스의 집합이다.
    - 2개 이상의 인스턴스를 포함
- 업무 프로세스에 이용된다.
    - 업무 프로세스에 의해 CRUD가 발생하는 엔터티이어야 한다.
    - CRUD가 발생하지 않으면, 부적절한 엔터티 도출 또는 업무 누락이다.
- 반드시 속성을 가진다.
    - 주식별자만 존재하고 일반속성이 없는 엔터티는 바람직하지 않음
    - 단, 연관 엔터티는 주식별자 속성만 갖고 있어도 인정
- 다른 엔터티와 최소 1개 이상의 관계가 있다.
    - 예외적으로 관계를 생략하는 경우도 있다.
        - 통계성 엔터티, 코드성 엔터티
        - 시스템 처리 시 내부 필요에 의한 엔터티(트랜잭션 로그 테이블 등)
    - 관계가 없는 엔터티를 '고립 엔터티'라고 한다.
        - 관계 누락이거나 부적절한 엔터티가 도출된 것

### 엔터티의 명명
- 생성 의미대로 이름 부여
- 실제 업무에서 사용하는 용어 사용
- 약어 사용 X
- 단수 명사 사용
- 유일한 이름 사용

## 속성
### 속성의 정의
- 업무에서 필요로 하는 인스턴스로 관리하고자하는 의미상 분리되지 않는 최소의 데이터 단위
    - ex) 나이, 이름 등
- 1개의 엔터티는 2개 이상의 인스턴스 집합
- 1개의 엔터티는 2개 이상의 속성을 가짐
- 1개의 속성은 1개의 속성값을 가짐
- ex) 나이 속성에 25, 37이 같이 들어갈 수 없음

### 속성의 특징
- 해당 업무에서 필요하고 관리해야 하는 정보
- 정규화 이론에 근간하여 주식별자에 함수적으로 종속되어야 함
    - ex) 주식별자(학번)에 의해 다른 속성들(이름, 학과 등) 결정되기 때문
- 하나의 속성은 한 개의 값만을 가져야함
    - 다중값 가질 시, 해당 속성을 별도의 엔터티로 분리함

### 속성의 명명
- 해당 업무에서 사용하는 이름을 부여
- 약어 사용을 가급적 피하기
- 서술식 속성명은 피하고 명상형 속성명을 사용
- 수식어, 소유격을 피한다.
- 속성의 이름은 전체 데이터 모델에서 유일성 확보
    - ex) 교수 엔터티의 속성 '이름', 학생 엔터티의 속성 '이름' 보다는 교수명, 학생명으로 속성 이름을 정하도록 한다. => 복합 명사 사용

### 속성의 도메인 (Domain)
- 각 속성이 가질 수 있는 값의 범위
- 속성에 대한 데이터 타입과 크키, 제약사항 지정
- ex) 주소: 길이가 20자기 이내인 문자열, 학점: 0.0 ~ 4.5 사이의 실수

### 속성의 분류
#### ⭐ 특성에 따른 분류
① 기본 속성
- 업무로부터 추출한 모든 속성
- 가장 일반적인 속성
- ex) 회원ID, 이름, 계좌번호, 주문일자, 원금

② 설계 속성
- 업무상 필요한 데이터 이외에 데이터 모델링을 위해 만든 속성
- 업무를 규칙화하기 위해 새로 만들거나 변형, 정의하는 속성
- 대게 코드성 속성은 원래 속성을 업무상 필요에 의해 변형해 만든 속성
- 일련번호와 같은 속성은 unique한 식별자를 부여하기 위해 새로 정의한 속성
- ex) 일련번호, 주문번호, 상품코드, 지점코드

③ 파생 속성
- 다른 속성들로부터 유도된 속성
- 다른 속성에 영향을 받아 발생하는 속성
- 보통 계산된 값들이 해당(통계)
- 데이터를 조회할 때 성능을 빠르게 하기 위해 원래 속성의 값을 계산하여 저장할 수 있도록 만든 속성
- 가급적 적게 정의하는 것이 좋음
- 값을 조회할 때 편하지만, 관련 값들이 업데이트 될 경우, 계산값을 관리하기가 부담
- ex) 합계, 평균, 전체 수

#### 엔터티 구성방식(분해 여부)에 따른 분류
- 기본키 속성(Primary key, PK) : 엔터티의 인스턴스를 구별할 수 있는 속성
- 외래키 속성(Foreign key, FK) : 다른 엔터티와 관계에서 포함된 속성
- 일반 속성 : PK, FK에 포함되지 않은 속성

#### 속성값 수에 따른 분류
- 단일값 속성(Single Value)
    - 하나의 값만 가지는 속성
    - ex) 나이, 이름
- 다중값 속성(Multi Value)
    - 여러 개의 값을 가지는 속성
    - ex) 취미
    - 다중값 속성은 '속성은 하나의 속성값을 가져야 한다'를 위배하니, 1차 정규화를 하거나, 별도의 엔터티로 만들어 관계로 연결해야 함.

#### 분리 가능성에 따른 분류
- 단순 속성(Simple)
    - 다른 속성으로 구성될 수 없는 속성
    - ex) 시, 구, 동, 번지, 이름, 나이
- 복합 속성(Composite)
    - 여러 속성들로 구성된 속성
    - ex) 주소

## 관계
### 관계의 정의
- 엔터티의 인스턴스 사이의 논리적인 연관성으로서 존재의 형태로서나 행위로서 서로에게 연관성이 부여된 상태
- ex) [ 강사 ] - 가르친다 - [ 수강생 ]

### 관계의 페어링
- 페어링 : 엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것
- 관계 : 페어링의 집합을 논리적으로 표현한 것

### 관계의 분류
- 어떤 목적(존재, 행위)으로 연결되어 있는지에 따라 관계 분류

① 존재에 의한 관계
- 하나의 엔터티가 다른 엔터티에 항상 속해 있다.
- 각 엔터티는 독립적으로 존재할 수 있다.
- UML에서는 '연관관계'라 표현한다. (실선으로 표기)
- 연관관계는 소스코드에서 멤버변수로 선언하여 사용할 수 있다.

② 행위에 의한 관계
- 혼자서는 존재할 수 없는 엔터티 (사건 엔터티)
- UML에서는 '의존관계'라 표현한다.(점선으로 표기)
- 의존관계는 오퍼레이션에 파라미터 등으로 이용할 수 있다.
- ex) 주문 CTA024는 김철수의 '주문'이라는 행위를 통해 생성

### 관계의 표기법
- 관계명 : 관계의 이름 (애매한 동사 피하기, 현재형으로 표현)
- 관계 차수 (Degree) : 각 관계에 참여할 수 있는 인스턴스의 수 (1:1, 1:N, M:N)
- 관계선택사양 (선택성) : 필수참여관계 (표기:|), 선택참여관계(표기: O)

### 관계 체크사항
- 2개의 엔터티 사이에 관심있는 연관 규칙이 존재하는가
- 2개의 엔터티 사이에 정보의 조합이 발생하는가
- 업무기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가
- 업무기술서, 장표에 관계연결을 가능하게 하는 동사가 있는가

