## 관계형 데이터베이스 개요
### 데이터베이스
- 넓은 의미 : 일상적인 정보들을 모아놓은 것 자체
- 일반적인 의미 : 특정 기업이나 조직 또는 개인이 필요에 의해 데이터를 일정한 형태로 저장해 놓은 것

### DBMS (Database Management System)
- 데이터를 효율적으로 관리하기 위한 시스템
- 데이터의 손상을 피하며 필요한 데이터를 복구해주는 시스템
    - ex) MySQL, ORACLE

### 데이터베이스 발전
- 1960년대
    - Flowchart 중심의 개발 방법 사용
    - 파일 구조를 통해 데이터를 저장과 관리(파일시스템)
- 1970년대
    - DB관리 기법이 처음 출현(태동)
    - 계층형(Hierarchical), 망형(Network) 데이터베이스 제품 상용화
- 1980년대
    - 관계형(Relational) 데이터베이스 상요화
    - Oracle, Sybase, DB2 등의 제품 사용
- 1990년대
    - Oracle, Sybase, Informix, DB2, Teradate, SQL Server외 많은 제품 출현
    - 객체 관계형 데이터베이스로 발전

### 관계형 데이터베이스(Relational Database, RDB)
- 1970년 영국 수학자 E.F.Codd 박사 논문에서 처음 소개
- 기업의 핵심 데이터는 대부분 관계형 데이터베이스로 저장되어 있음
- 관계형 데이터베이스는 SQL 문장에 의해 관리됨

```sql
SELECT a.학번, a.학생이름, b.과목명
FROM 학생 a
INNER JOIN 수강 b
ON a.학번 = b.학번
```

### 관계형 데이터베이스의 구성요소
- 계정
    - 데이터의 접근 제한을 위해 업무별/시스템별로 존대
    - 모든 테이블이 모든 유저들에게 조회되게 할 수는 없으니까)
- 테이블
    - DBMS의 데이터베이스 안에 데이터가 저장되는 형식
- 스키마
    - 테이블이 어떠한 구성으로 이루어져 있는지
    - 테이블의 기본적인 구조 정의

### 테이블
- 테이블
    - 행과 열의 2차원 구조를 가진 데이터 저장 객체(Object)
    - 관계형 데이터베이스의 기본 단위
    - 릴레이션이 곧 테이블
- 컬럼/열 (Field)
    - 더 이상 나눌 수 없는 특성
- 로우/행
    - 레코드(Record)
    - 튜플(Tuple)

### ⭐ 테이블의 특징
- 하나의 테이블은 반드시 하나의 유저(계정)가 소유해야 한다.
- 테이블 간 관계 1:1, 1:N, N:N
- 테이블명은 중복될 수 없으나, 소유자가 다르면 같은 이름으로 생성 가능
    - 같은 계정으로 동일한 이름을 가진 객체 생성 불가능
- 테이블은 행 단위로 데이터가 입력, 삭제되며 수정은 값의 단위

### SQL (Structured Query Language)
- 관계형 데이터베이스에서 데이터 정의, 조작, 제어를 위해 사용하는 언어
- SQL문법은 대,소문자 구분하지 않음
- 종류 : 데이터 조작어(DML), 데이터 정의어(DDL), 데이터 제어어(DCL), 트랜잭션 제어어(TCL)

#### 💡 SQL 실행단계

1\) 파싱(Parsing)
- 문법 확인 및 구문 분석을 통해 올바른 SQL문인지 확인
- 파싱이 끝나면, 분서된 SQL이 라이브러리 캐시(Library Cache)에 저장
- Library Cache: 이전에 실행된 SQL문에 대한 정보를 저장하는 곳

2\) 실행(Execution)
- 옵티마이저(Optimizer)가 생성한 최적의 실행 계획에 따라 SQL문 실행

3\) 인출(Fetch)
- 실행 결과를 데이터베이스에서 사용자에게 전송하는 과정

### 관계형 데이터베이스 특징
- 데이터의 분류, 정렬, 탐색 속도가 빠르다.
- 신뢰성이 높고, 데이터의 무결성 보장한다.
- 기존의 작성된 스키마를 수정하기 어렵다.
- 데이터베이스의 부하를 분석하는 것이 어렵다.

### 데이터 무결성 (Integrity)
- 데이터의 정확성과 일관성을 유지하고, 데이터에 결손과 부정함이 없음을 보증하는 것
- 데이터베이스에 저장된 값과 그것이 표현하는 현실의 비즈니스 모델의 값이 일치하는 정확성을 의미
- 데이터 무결성을 유지하는 것이 DBMS에 중요한 기능
- **다양한 제약조건(기본키, 외래키, NOT NULL 제약, UNIQUE 제약 등)을 통해 데이터의 무결성이 유지됨**

### 데이터 무결정 종류
① 개체 무결성 : 테이블의 기본키를 구성하는 컬럼(속성)은 NULL 값X, 중복값X

② 참조 무결성 : 외래키

③ 도메인 무결성 : 주어진 속성 값이 정의된 도메인에 속한 값이어야 함

④ NULL 무결성 : 특정 속성에 대해 NULL을 허용하지 않음

⑤ 고유 무결성 : 특정 속성에 대해 값이 중복되지 않음

⑥ 키 무결성 : 하나의 관계에는 적어도 하나의 키가 존재해야 함 (테이블이 서로 관계를 가진다면, 반드시 하나 이상의 조인키를 가짐)

### ⭐ Relational Model Constraints (제약조건)
<4대 제약 조건> <br/>
💡 3대는 키와 개체 무결성 제약을 합침

① 도메인 제약 (Domain Constraints)
- 속성(Attribute)에 대한 제약 

② 키 제약 (Key Constraints)
- 릴레이션(Relation)에 대한 제약(테이블)
- 테이블은 키(PK)를 가져야 한다.

③ 개체 무결성 제약 (Entity Integrity Constraints)
- 기본키(Primary Key)에 대한 제약
- 테이블이 가진 키는 자고로 이래야 한다는 제약
- PK는 UNIQUE하면서 NOT NULL이어야 한다.

④ 참조 무결성 제약 (Referential Integrity Constraints)
- 외래키(Foreign Key)에 대한 제약

### 도메인 제약
- 속성 값은 원자성(Atomicity)을 가지며 도메인에서 정의된 값이어야 함
- Composite Attribute와 Multivalued Attribute는 허용 X
    - 주소 = 시군구 + 상세주소
- NULL값은 허용됨 (NOT NULL이 아닌 속성이라면)

|학번|이름|나이|차량번호|취미|
|---|---|---|---|---|
|1234|홍길동|21|01가1234|체조|
|5678|강감찬|①고려|②|③축구,농구,배구|

① 도메인에서 정의된 값 위배<br/>
② NULL값 허용이라 괜찮음<br/>
③ Multivalued Attribute, 원자성 위배

### 키 제약
- 릴레이션의 모든 튜플은 서로 식별 가능해야 함

①
|이름|나이|혈액형|전공|
|---|---|---|---|
|홍길동|21|A|경영정보|
|강감찬|22|O|정보시스템|

- 잘목된 테이블
- 각 속성으로도 튜플 식별불가
- 4개의 속성을 복합식별자로 두어도 식별 불가
- PK가 없는 테이블 => 인조식별자 만들면 됨

②
|이름|나이|학번|주민번호|
|---|---|---|---|
|홍길동|21|1234|111-2222|
|강감찬|22|5678|333-4444|

- 문제 없는 릴레이션
- 후보키: 학번, 주민번호

### 개체 무결성 제약
- 기본키(PK)는 NOT NULL & UNIQUE

### 참조 무결성 제약
- 외래키(FK)
    - 릴레이션 R1이 릴레이션 R2를 참조하는 경우, R2의 기본키는 R1에서 외래키로 사용됨
    - 가져온 키의 필드명은 바꿀 수 있음
    - FK는 자기 자신이 속한 릴레이션을 참고할 수 있다.

[학생 R1]
|학번|이름|나이|소속|멘토|
|---|---|---|---|---|
|1234|홍길동|21|MIS||
|2345|강감찬|22|MIS|1234|
|3456|김유신|23|경영||
|4567|유관순|22|컴공|2345|

[학과 R2]
|학과|정원|위치|
|---|---|---|
|MIS|100|경상관|
|경영|200|경상관|
|컴공|100|공학관|
|수학|50|자연관|

💡 소속은 학과명을 참고, 멘토는 학번을 참고하고 있음

### ERD (Entity Relationship Diagram)
- 테이블 간 서로의 상관관계를 그림으로 도식화(표현)한 것
- 관계의 의미를 직관적으로 표현할 수 있는 수단
- 구성요소: 엔터티(Entity), 관계(Relationship), 속성(Attribute)
- 현실 세계의 데이터는 구성요소 3가지로 모두 표현이 가능


<br/>

📖 Reference
- [2024 개념정리](https://bruders.tistory.com/)
